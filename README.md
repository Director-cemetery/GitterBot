## Gitter Bot based on Laravel 5.1

### Запуск

- Сконфигурируйте бота 
    - Параметр `GITTER_TOKEN` в файле `.env` (если такого нету, 
        создайте из `.env.example`)
    - Прочие параметры находятся в файле `config/gitter.php`
- Выполните миграции `php artisan migrate`
- Введите `php artisan gitter:listen $room`, где 
$room - идентификатор комнаты или его алиас.

### Как работает

Бот создаёт стрим-соединение по Gitter Stream API. Далее 
инициализируются Middlewares и Subscribers, определённые 
в `app/Middlewares` и `app/Subscribers` соответственно. 
Дальнейшую логику работы определяют именно они.
 
### Что такое Middlewares

Middlewares - это каскадная система классов, вызывающаяся 
при каждом сообщении из комнаты. Каждый класс имеет свой вес, 
т.е. порядок исполнения, определённый его приоритетом. После 
вызова (метод `handle`) он имеет возможность переопределить 
или подправить сообщение, передавая его вниз по каскаду, в том 
числе и прервать выполнение последующих элементов каскада.
  
### Что такое Subscribers

Subscribers (подписчики) - это классы, инициализирующиеся 
при старте системы, предназначенные для создания подписок на 
события и отображения этих событий в чат. Как можно понять - 
подписчики не обязательно должны реагировать на сообщения и
могут быть полностью асинхроонными.

### Что ещё следует знать

Все Middlewares и Subscribers находятся в Laravel контейнере,
а это значит, что им доступно Dependency Injection в конструкторе.

Так же в DI контейнере содержатся два базовых инстанса - 
`App\Room` и `App\Gitter\Client`. Первый отвечает за взаимодействие 
с текущей комнатой, второй за общее взаимодействие с Gitter API.